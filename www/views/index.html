<!doctype html>

<head>
    <title>Phantom Trend</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/pt.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
</head>

<body>

    <div id="container">

        <div class="pagetitle">
            <h1>The Phantom Trend</h1>
            <p>Like Nate Silver, only less accurate</p>
        </div>

        <div class="pagepart firstrow">
            <h2>Summary</h2>
            <p>The latest estimate of voting intention has the ALP/LNP two-party preferred at <b>{{=it.electionSummaryStats.twoPartyPreferred}}/{{=100 - it.electionSummaryStats.twoPartyPreferred}}</b>. That's based on primary votes estimated at: LNP {{=it.electionSummaryStats.primary.LNP}},
                ALP {{=it.electionSummaryStats.primary.ALP}}, Greens {{=it.electionSummaryStats.primary.GRN}}, Palmer United {{=it.electionSummaryStats.primary.PUP}}, Independent/Other {{=it.electionSummaryStats.primary.OTH}}.
                See the Trends section for more details.
            </p>
            <p>The model figures a 98&percnt; probability of an LNP win, a 1&percnt; chance of a hung parliament, and a 1&percnt; chance of an ALP majority.
                See the House of Reps section below for details on individual seats.
            </p>
        </div>

        <div id="trend" class="pagepart">
            <h2>Trends</h2>
            <div id="trend-chart"></div>
            <div id="chart-controls">
                <ul>
                    <li>
                        <h3>Electorate</h3>
                        <select id="trend-electorate-select">
                            <option value="AUS" selected>Australia</option>
                            <option value="NSW">NSW</option>
                            <option value="VIC">Victoria</option>
                            <option value="QLD">Queensland</option>
                            <option value="WA">Western Australia</option>
                            <option value="SA">South Australia</option>
                            <option value="TAS">Tasmania</option>
                            <option value="NT">Northern Territory</option>
                            <option value="ACT">ACT</option>
                        </select>
                    </li>
                    <li>
                        <h3>Party</h3>
                        <select id="twopp-party">
                            <option value="ALP">ALP point of view</option>
                            <option value="LNP">LNP point of view</option>
                            <option value="BOTH" selected>Both ALP and LNP</option>
                        </select>
                    </li>
                    <li>
                        <h3>Type</h3>
                        <select id="trend-graph-type">
                            <option value="twopp" selected>Two-Party Preferred</option>
                            <option value="primary">Primary Votes</option>
                        </select>
                    </li>
                    <li>
                        <h3>Y-axis Range</h3>
                        <select id="trend-yaxis-range">
                            <option value="auto" selected>Auto</option>
                            <option value="fixed">Fixed</option>
                        </select>
                    </li>
                    <li>
                        <h3>Poll Data</h3>
                        <select id="show-pollsters">
                            <option value="show" selected>Show</option>
                            <option value="hide">Hide</option>
                        </select>
                    </li>
                    <li>
                        <h3>Primary Trends To Show</h3>
                        <input type="checkbox" id="show-ALP" checked>ALP</input>
                        <input type="checkbox" id="show-LNP" checked>LNP</input>
                        <input type="checkbox" id="show-GRN" checked>GRN</input>
                        <input type="checkbox" id="show-PUP" checked>PUP</input>
                        <input type="checkbox" id="show-OTH" checked>OTH</input>
                    </li>
                </ul>
            </div>
            <script>
                var PT_HOST = "{{=it.PT_HOST}}";
            </script>

            <script src="js/dygraph-combined.js"></script>
            <!-- <script src="dyg/dygraph-combined-dev.js"></script> -->

            <script src="js/jquery.min.js"></script>
            <script src="js/dataframe.js"></script>
            <script src="js/trend.js"></script>

            <script src="https://fb.me/react-0.13.3.min.js"></script>


            <div id="houseforecast" class="pagepart">
                <h2>House Of Reps</h2>
                <script>
                    var houseResults = {
                        {{~it.houseResults: value: index}}
                        "{{=value.electorate}}": {
                            "name": "{{=value.electorate}}",
                            "description": "{{=value.description}}",
                            "incumbentparty": "{{=value.incumbentparty}}",
                            "member": "{{=value.member}}",
                            "state": "{{=value.state}}",
                            "winner": "{{=value.winner}}",
                            "alpprimary": {{=value.alpprimary}},
                            "lnpprimary": {{=value.lnpprimary}},
                            "grnprimary": {{=value.grnprimary}},
                            "pupprimary": {{=value.pupprimary}},
                            "othprimary": {{=value.othprimary}},
                            "alp2pp": {{=value.alp2pp}},
                            "lnp2pp": {{=value.lnp2pp}}
                            },
                        {{~}}
                    };
                </script>
                <div id="repsApp"></div>
                <script src="js/reps.js"></script>
            </div>

            <!--    <div id="senateforecast" class="pagepart">
            <h2>Senate</h2>
        </div>  -->

            <div id="recent" class="pagepart">
                <h2>Recent Changes</h2>
                <div id="github-commit-list">
                    <p id="github-commit-1"></p>
                    <p id="github-commit-2"></p>
                    <p id="github-commit-3"></p>
                    <p id="github-commit-4"></p>
                    <p id="github-commit-5"></p>
                </div>
            </div>

            <div id="aboutthis" class="pagepart">
                <h2>About</h2>
                <h3>The Model</h3>
                <p>These trendlines are fitted using a linear <a href="http://en.wikipedia.org/wiki/Kalman_filter">state
            space model</a>. The underlying state variables are the primary votes for each party in each State and Territory. The model fits a simple local level model to each component, but it uses a factor model for the covariance of each week's innovations.
                    Estimates of national votes and TPPs are made using population weights and last election's state-by-state preference flows.</p>
                <p>Each polling source has a fixed house effect in the form of a Gaussian error distribution. Elections are assumed to be perfect observations. I match the timing of each polling sample, so that e.g. Newspoll's quarterly averages are modelled
                    as noisy observations of the underlying data averaged over a quarter.</p>
                <p>The complete code and data for the model, and for this website, are available on <a href="https://github.com/PhantomTrend/ptcode">GitHub</a>.
                    <h3>See Also</h3>
                    <p>There's another statistical polling model over at <a href="http://marktheballot.blogspot.com/">Mark The Ballot</a>, and one under development by <a href="http://www.clintonboys.com/emma-chisit/">Clinton Boys</a>. The <a href="http://blogs.crikey.com.au/pollbludger">Poll Bludger</a> and <a href="http://kevinbonham.blogspot.com.au/">Dr Kevin Bonham</a>                        both publish regularly updated polling aggregates which they put together using their own judgement. And Hugh Parsonage has a wonderful visualisation of the Reps over at <a href="http://150hexagons.com/">150 Hexagons</a>.</p>
                    <h3>Thanks</h3>
                    <p>Shouts out to Thomas McMahon who supplied a bunch of this data. And massive thanks to the <a href="http://blogs.crikey.com.au/pollbludger">Poll Bludger</a> and the <a href="https://twitter.com/GhostWhoVotes">Ghost Who Votes</a>, who
                        curated the rest.</p>
                    <h3>The Author</h3>
                    <p>I'm <a href="http://www.jamiehall.cc">Jamie Hall</a>, a data scientist at <a href="https://www.kaggle.com">Kaggle</a>, formerly of the RBA's modelling department. Feel free to drop me a line on <a href="https://www.twitter.com/PhantomTrend">Twitter</a> or
                        <a href="mailto:phantomtrend@gmail.com">email</a> if you have comments, questions, suggestions or bug reports.
                    </p>
                    <h3>Privacy and Cookies</h3>
                    <p>I've implemented <a href="https://support.google.com/analytics/answer/2799357?hl=en">Google Analytics</a>, because I'm curious to learn more about how people are using the site. You can opt out of this by blocking cookies, by using Google's own
                        <a href="https://tools.google.com/dlpage/gaoptout/">opt-out tool</a>, or by installing <a href="http://privacytools.io">privacy tools</a>.</p>
            </div>
        </div>
    </div>
    <script src="js/github.js"></script>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-52577476-1', 'auto');
        ga('send', 'pageview');
    </script>
</body>
